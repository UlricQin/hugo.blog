+++
date = "2014-12-27T19:46:19+08:00"
menu = "main"
tags = ["work", "life"]
title = "2014年终总结"

+++

这段时间，办公室经常会出现火车鸣响的声音，呵，那是有同事很幸运抢到票了。时光的脚步匆匆，一不小心，就走过了2014年。blog中总是写一些技术类文章还是蛮无聊的，这次给自己做个总结，嗯，顺便定下明年的目标~

## 做了哪些项目

啊，这个倒是很清晰，年初zabbix扛不住压力，让大家用得很不爽，我暂且把CloudFoundry搁置一边，和炜哥一起开发内部用的Falcon来替代zabbix。小米的很多运维工程师都是从大厂过来的，有很多不错的理念，我们讨论设计了一个月，差不多敲定了Falcon的样子，给大家的经验点个赞~后来又经过几个月的开发、测试、上线、试用、推广，目前已经完全干掉了zabbix，嗯，还不错吧，嘿

系统中有两个比较通用的小组件放到了github上，大家有兴趣可以看看：

- [UIC](https://github.com/UlricQin/uic) 一个Java项目，维护了报警组和人的对应关系
- [Falcon-Agent](https://github.com/open-falcon/agent) 监控系统的Agent，收集机器各种指标

接下来一段时间，重新拾起CloudFoundry的一些工作，我、东辉、炜哥（主要是东辉的工作，给东辉点赞，靠谱工程师一枚）在金山云搭建了一套cf，公司的战略是要做公有云的，那这么一个强大的开源软件作为起点是个不错的选择。我们的目标也很明确，就是给小米产业链上的伙伴提供一些平台级支持，第一家接入的公司是小米手环，还算顺利，稳定跑了几个月。

之后公司成立了一个虚拟团队专门来搞金山云上的PaaS服务，我们遇到了一个难题：IaaS、PaaS如何结合，才能更好的给企业用户提供支持？这么讲比较笼统，听我简单分解一下~

~ 1、传统PaaS提供商，比如GAE/Heroku/SAE/BAE，都是有个公共的机群，我作为一个企业用户，开发了一个app，在这个公共机群上创建几个实例run起来，你作为一个企业用户开发了一个app，也在同一个机群上创建实例run起来，我们所有用户共用了一套机群。但是从安全性、资源冗余量等方面考虑，很多企业用户是希望自己独享一套机群的

~ 2、金山云作为IaaS提供商，会和小米合作提供RDS、Cache、结构化存储、分布式计算等等基础服务，这些企业用户可以接入这些基础服务，给自己节省成本。虽然PaaS也可以提供这些基础服务，但是IaaS已经做了我们就没必要再做一遍。那么问题来了，不同的企业用户有自己的金山云账号，账号下购买的虚机和服务是互通的，但是不同账号之间的网络是隔离的，这是为了安全性考虑。如果大家公用一套cf集群，cf集群是归于一个单独的金山云账号的，没法访问其他企业账号下的RDS、Cache等服务

~ 3、研究过CloudFoundry的人都知道，她只提供了HTTP服务，七层的gorouter也只支持http协议、websocket协议。但是企业用户的后端服务往往比较复杂，经常需要写一些rpc服务，而这些rpc服务又没法托管到cf上，喔，问题比较大啊

这时航军老师给我们介绍了aws的Elastic Beanstalk服务，这是个很有意思的东西，我们刚听到的时候对其理念表示不可思议~

这是个什么东东呢？他的理念是为各个企业用户单独搭建一套PaaS，Beanstalk不收费，aws收的还是IaaS的钱，用户仍然对虚机有完全的控制权，用户甚至可以重写部署在自己虚机上的Beanstalk的组件使其更好的工作。有点意思哈

但是我们用的是CloudFoundry，这套平台很大，搭建起来也很费劲，给每个用户部署一套非常麻烦，而cf本身的运维工作用户根本做不了，怎么办？

我们决定自己写一套，嗯，社区已经有了Docker了，container这层已经搞定了，有了Dockerfile了，打包规范不用管了，有了Docker registry了，SCM不用管了，有了gorouter、hipache了，七层动态路由不用管了。我们只需要再写一个调度、一个Dashboard就O了，搞起~

一个月，上线试跑，两个月稳定，效率还可以吧，呵呵，我们为其取名DINP，之后如果要开源的话，将会出现在这里：https://github.com/dinp 。现在这个项目在给内部服务提供支持，最终没有部署到金山云上，比较可惜。公司组建了小米公有云团队，招到了对CloudFoundry很有经验的人，于是，他们在cf上继续搞起了，希望他们能成功，金山云，再见~

真是三句话不离本行，本来是打算总结一下工作、生活、订个目标，结果又在技术上啰嗦了半天~

总结起来，今年主要就做了Falcon和Dinp这两个项目，对自己还算满意，不知道老板是否满意了，呵呵。

## 明年计划

由于炜哥有很多事情，他手上负责的Falcon的组件都要交给我，东辉又准备换个环境，就剩我自己负责这两个项目了，目测明年压力略大啊……不行，我得插播个招聘广告：有对监控系统、PaaS平台等自动化运维工作感兴趣的朋友可以联系我：）

明年争取把这两个项目继续往前推进：

- 监控系统：做的更人性化，各个组件重构优化，提高架构上的稳定性。机器量上涨之后，对监控系统也是挑战。另外准备把监控系统整个开源！希望业界同仁一起用起来，一起改进。

- DINP：明年希望能有更多的服务接入，消除系统所有单点，提升稳定性

好吧，看起来也没有精力再搞新项目了……所以说，团队很重要啊，现在已经不是单兵作战时代了，来吧兄弟，过来咱们一起搞，完善这两个系统，再做些牛逼的东东出来

## 反思

今年有些地方做得不好，得反思一下，以后改进：

- 上微博的时间太长，其实大部分的微博都是在营销，在上面浪费太多时间，以后尽量不上或少上，嘿嘿
- 多看看技术Blog，多看看技术书籍，不能太浮躁，今年看得太少
- 英语啊，我永远的痛……今年花费在英语学习上的时间还是太短，15年多多学习，以量取胜
- 14年整体工作太忙，生活工作没能协调好，15年得出去多走走，多陪陪女友

blog访问量很小，这个文章应该没人看吧，不过还是祝各位亲朋好友、同学同事在新的一年目标有成，达成所愿，大家出来工作不易，都是为了谋生，希望老板给各位多多加薪，受到肯定：）


